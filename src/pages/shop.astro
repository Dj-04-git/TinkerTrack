---
export const prerender = false;
import Layout from '../layouts/Layout.astro';
import SubscriptionCard from '../components/SubscriptionCard.astro';
import { getSubscriptions } from '../lib/subscriptions.js';

const session = Astro.locals?.session ?? {};
const isLoggedIn = Boolean(session.isLoggedIn);
const isAdmin = Boolean(session.isAdmin);

const subscriptions = getSubscriptions();
const filters = ['All', 'Analytics', 'Automation', 'Billing'];
---

<Layout title="TinkerTrack â€¢ Shop" isLoggedIn={isLoggedIn} isAdmin={isAdmin}>
	<section class="relative overflow-hidden">
		<div class="pointer-events-none absolute inset-0">
			<div class="absolute -top-28 left-10 h-72 w-72 rounded-full bg-primary/20 blur-3xl"></div>
			<div class="absolute bottom-0 right-10 h-80 w-80 rounded-full bg-accent/20 blur-3xl"></div>
		</div>
		<div class="mx-auto max-w-6xl px-6 py-14">
			<div class="flex flex-col gap-6 lg:flex-row lg:items-end lg:justify-between">
				<div class="max-w-2xl">
					<p class="badge badge-outline">Subscription Marketplace</p>
					<h1 class="font-display mt-4 text-4xl font-semibold tracking-tight sm:text-5xl">
						Discover new subscription plans
					</h1>
					<p class="mt-4 text-base-content/70">
						Browse curated tools for managing billing, customer lifecycle, and reporting.
						All plans are ready to connect to your workspace.
					</p>
				</div>
				<div class="w-full max-w-md">
					<label class="input input-bordered flex items-center gap-2">
						<svg
							xmlns="http://www.w3.org/2000/svg"
							viewBox="0 0 24 24"
							fill="none"
							stroke="currentColor"
							stroke-width="1.5"
							class="h-4 w-4 opacity-70"
						>
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								d="m21 21-4.35-4.35m1.35-5.65a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"
							/>
						</svg>
						<input type="text" class="grow" placeholder="Search subscriptions" />
					</label>
				</div>
			</div>
			<div class="mt-8 flex flex-wrap gap-2">
				{filters.map((filter) => (
					<button class="btn btn-sm btn-ghost" type="button">{filter}</button>
				))}
			</div>
		</div>
	</section>

	<section>
		<div class="mx-auto grid max-w-6xl gap-6 px-6 pb-16">
			<div class="flex flex-wrap items-center justify-between gap-4">
				<h2 class="font-display text-2xl">Available subscriptions</h2>
				<button class="btn btn-ghost btn-sm">View all</button>
			</div>
			<div class="grid gap-6 md:grid-cols-2 xl:grid-cols-3">
				{subscriptions.map((subscription) => (
					<SubscriptionCard subscription={subscription} />
				))}
			</div>
		</div>
	</section>
</Layout>
