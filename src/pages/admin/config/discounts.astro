---
export const prerender = false;
import AdminLayout from '../../../layouts/AdminLayout.astro';
import AccessGate from '../../../components/AccessGate.astro';

const session = Astro.locals?.session ?? {};
const isLoggedIn = Boolean(session.isLoggedIn);
const isAdmin = Boolean(session.isAdmin);
---

<AdminLayout title="TinkerTrack â€¢ Discounts" isLoggedIn={isLoggedIn} activeSubTab="Discounts">
	{
		!isLoggedIn ? (
			<AccessGate
				badge="Login required"
				title="Sign in to manage discounts"
				description="Admin configuration pages are available after you sign in."
			/>
		) : !isAdmin ? (
			<AccessGate
				badge="Admin only"
				title="Admin access required"
				description="Only admins can manage configuration settings."
				linkHref="/profile"
				linkText="Go to profile"
				hint="Request admin access from your workspace owner."
			/>
		) : (
			<div class="p-6 lg:p-8">
				<!-- Page header -->
				<div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8">
					<div>
						<p class="text-xs uppercase tracking-widest text-base-content/50 mb-2">Configuration</p>
						<h1 class="font-display text-2xl sm:text-3xl font-semibold">Discounts</h1>
					</div>
					<div class="flex items-center gap-2">
						<button class="btn btn-outline btn-sm">
							<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
								<path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
							</svg>
							New Discount
						</button>
					</div>
				</div>

				<!-- Placeholder content -->
				<div class="max-w-2xl rounded-2xl border border-base-300/70 bg-base-100/60 overflow-hidden">
					<div class="px-5 py-4 border-b border-base-300/60 bg-base-100/40">
						<h3 class="font-display text-lg">Discount Rules</h3>
						<p class="text-xs text-base-content/60 mt-0.5">Manage discount codes and promotional pricing</p>
					</div>
					<div class="p-12 text-center">
						<div class="flex flex-col items-center gap-4 text-base-content/50">
							<svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 opacity-30" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1">
								<path stroke-linecap="round" stroke-linejoin="round" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
							</svg>
							<div>
								<p class="font-medium text-base-content/70">Coming soon</p>
								<p class="text-sm mt-1">Discount management will be available here</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		)
	}
</AdminLayout>
